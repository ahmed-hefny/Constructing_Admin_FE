import{a as M}from"./chunk-V7BNXLFM.js";import{a as A}from"./chunk-6YMPGOFZ.js";import{a as I,b as N,d as k}from"./chunk-FXENJLEK.js";import"./chunk-CFO42UOC.js";import"./chunk-XE2DAF5U.js";import"./chunk-GUBCOLOF.js";import"./chunk-TKOGCPQ2.js";import{c as w,d as L}from"./chunk-SC4WDLJ2.js";import"./chunk-A23VZRFP.js";import{a as T}from"./chunk-4TIZV3QQ.js";import"./chunk-QM66G4CE.js";import"./chunk-GGQ7LRWG.js";import{e as E}from"./chunk-ERDV7APT.js";import{n as P}from"./chunk-W3TJ7HAV.js";import"./chunk-TBYF2LDC.js";import{d as D}from"./chunk-6KR62BTE.js";import{h as x}from"./chunk-6M5HUDFR.js";import"./chunk-RSINUCQW.js";import{Fa as m,Fb as a,Gb as g,Qa as v,R as s,Va as y,W as u,X as f,kb as C,lb as t,mb as i,nb as d,rb as S,sb as c,tb as _}from"./chunk-SWFXP6AJ.js";import{a as b,b as h}from"./chunk-EQDQRRRY.js";function V(o,e){o&1&&(t(0,"tr")(1,"th"),a(2,"#"),i(),t(3,"th"),a(4,"Name"),i(),t(5,"th"),a(6,"ID"),i(),t(7,"th"),a(8,"Actions"),i()())}function j(o,e){if(o&1){let n=S();t(0,"tr")(1,"td"),a(2),i(),t(3,"td"),a(4),i(),t(5,"td"),a(6),i(),t(7,"td")(8,"div",12)(9,"button",13),c("click",function(){let p=u(n).$implicit,l=_();return f(l.editItem(p))}),d(10,"i",14),i(),t(11,"button",13),c("click",function(){let p=u(n).$implicit,l=_();return f(l.confirmDelete(p.id))}),d(12,"i",15),i()()()()}if(o&2){let n=e.$implicit,r=e.rowIndex;m(2),g(r+1),m(2),g(n.name),m(2),g(n.id||"-")}}function R(o,e){o&1&&(t(0,"tr")(1,"td",16),a(2,"No Result found."),i()())}var O=class o{data=[];pagination=D;companiesService=s(M);router=s(x);toaster=s(T);dialogService=s(A);ngOnInit(){this.getData()}addNew(){this.router.navigate(["companies","create"],{relativeTo:this.router.routerState.root})}editItem(e){this.router.navigate(["companies","edit",e.id],{relativeTo:this.router.routerState.root,queryParams:{name:e.name}})}deleteCompany(e){this.companiesService.delete(e).subscribe({next:()=>{this.getData(),this.toaster.showSuccess("Company deleted successfully")},error:n=>{this.toaster.showError("Failed to delete company",n)}})}confirmDelete(e){let n={header:"Confirmation",closeOnEscape:!0,icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"btn btn-error",rejectButtonStyleClass:"btn btn-accent mr-2",acceptLabel:"Delete",acceptIcon:"pi pi-check",rejectLabel:"Cancel",rejectIcon:"pi pi-times",message:"Are you sure you want to delete this company?",onAccept:()=>{this.deleteCompany(e)}};this.dialogService.confirmDialog(n)}getData(){this.companiesService.getAllCompanies(this.pagination).subscribe({next:e=>{this.data=e.items,this.pagination=h(b({},this.pagination),{totalRecords:e.count})},error:e=>{this.toaster.showError("Failed to load companies",e)}})}onPageChange(e){this.pagination.pageNumber=e.pageNumber,this.pagination.pageSize=e.pageSize,this.getData()}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=v({type:o,selectors:[["app-company-list-page"]],decls:15,vars:4,consts:[[1,"page"],[1,"page-header"],[1,"page-header-title"],[1,"btn","btn-primary",3,"click"],[1,"pi","pi-plus"],[1,"page-content"],[1,"px-0"],["styleClass","p-datatable-striped",3,"value","responsiveLayout","scrollable"],["pTemplate","header"],["pTemplate","body"],["pTemplate","empty"],[3,"onPageChange","paginationConfig"],[1,"flex","gap-10"],[1,"btn","btn-outline","border-0",3,"click"],[1,"pi","pi-pencil","ca-text-info","ca-font-bold"],[1,"pi","pi-trash","ca-text-error","ca-font-bold"],["colspan","3",1,"text-center"]],template:function(n,r){n&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),a(3,"Companies"),i(),t(4,"button",3),c("click",function(){return r.addNew()}),d(5,"i",4),t(6,"span"),a(7,"New"),i()()(),t(8,"div",5)(9,"p-card",6)(10,"p-table",7),y(11,V,9,0,"ng-template",8)(12,j,13,3,"ng-template",9)(13,R,3,0,"ng-template",10),i(),t(14,"app-pagination",11),c("onPageChange",function(l){return r.onPageChange(l)}),i()()()()),n&2&&(m(10),C("value",r.data)("responsiveLayout","scroll")("scrollable",!0),m(4),C("paginationConfig",r.pagination))},dependencies:[E,P,L,w,k,N,I],encapsulation:2})};export{O as CompanyListPageComponent};
