import{a as z}from"./chunk-V7BNXLFM.js";import"./chunk-GUBCOLOF.js";import{a as B,b as D,c as G,d as I}from"./chunk-SC4WDLJ2.js";import{b as k,c as p,e as A,f as N,g as T,h as f,k as R,l as w,m as x,o as L}from"./chunk-A23VZRFP.js";import{a as M}from"./chunk-4TIZV3QQ.js";import{c as E,e as _}from"./chunk-ERDV7APT.js";import"./chunk-W3TJ7HAV.js";import"./chunk-6KR62BTE.js";import{f as F,h as S}from"./chunk-6M5HUDFR.js";import{p as b}from"./chunk-RSINUCQW.js";import{A as v,Fa as m,Fb as d,Hb as y,Qa as h,R as r,fb as g,gb as C,kb as s,lb as a,mb as o,nb as c,sb as u}from"./chunk-SWFXP6AJ.js";import"./chunk-EQDQRRRY.js";function q(l,t){l&1&&(a(0,"small",10),d(1," Name is required (3-20 characters) "),o())}var V=class l{inputForm;isLoading=!1;editMode=!1;router=r(S);toaster=r(M);activatedRoute=r(F);companiesService=r(z);constructor(){this.initializeForm(),this.processEditMode()}navigateBack(){this.router.navigate(["companies"])}onSaveClick(){if(this.isLoading=!0,this.inputForm.invalid){this.inputForm.markAllAsTouched(),this.isLoading=!1;return}let t=this.inputForm.value;(this.editMode?this.companiesService.update(t):this.companiesService.create(t)).pipe(v(()=>this.isLoading=!1)).subscribe({next:()=>{let e=`user ${this.editMode?"updated":"created"} successfully`;this.toaster.showSuccess(e),this.navigateBack()}})}initializeForm(){this.inputForm=new T({id:new f(null),name:new f(null,[p.required,p.minLength(3),p.maxLength(20)])})}processEditMode(){let t=this.activatedRoute.snapshot.paramMap.get("id");if(t){this.editMode=!0;let i=this.activatedRoute.snapshot.queryParamMap.get("name");this.inputForm.patchValue({id:+t||null,name:i||null})}}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=h({type:l,selectors:[["app-add-edit-company"]],decls:16,vars:4,consts:[[1,"page"],[1,"page-header"],[1,"btn","btn-outline","border-0",3,"click"],[1,"pi","pi-angle-left","text-2xl"],[1,"page-header-title"],[1,"page-content"],[1,"input-form",3,"formGroup"],[1,"form-field"],["for","name",1,"field-label"],["pInputText","","id","name","formControlName","name","placeholder","Enter name",1,"w-full"],[1,"error-message"],[1,"form-actions"],["pButton","","type","submit","size","large","label","Save",1,"btn","btn-primary",3,"click","loading"]],template:function(i,e){if(i&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),u("click",function(){return e.navigateBack()}),c(3,"i",3),o(),a(4,"h1",4),d(5),o()(),a(6,"div",5)(7,"p-card")(8,"form",6)(9,"div",7)(10,"label",8),d(11,"Name"),o(),c(12,"input",9),g(13,q,2,0,"small",10),o()(),a(14,"div",11)(15,"button",12),u("click",function(){return e.onSaveClick()}),o()()()()()),i&2){let n;m(5),y(" ",e.editMode?"Edit":"Create new"," company "),m(3),s("formGroup",e.inputForm),m(5),C((n=e.inputForm.get("name"))!=null&&n.invalid&&((n=e.inputForm.get("name"))!=null&&n.touched)?13:-1),m(2),s("loading",e.isLoading)}},dependencies:[b,L,R,k,A,N,w,x,D,B,_,E,I,G],styles:["[_nghost-%COMP%]     .input-form{grid-template-columns:1fr}"]})};export{V as AddEditCompanyComponent};
