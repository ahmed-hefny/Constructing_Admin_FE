import{a as h,b as w}from"./chunk-YD4TBQKP.js";import{a as I}from"./chunk-HF7U6ISK.js";import{a as ie,b as oe}from"./chunk-HHNU67NF.js";import{a as Z,b as ee,c as te,d as ne}from"./chunk-COKV7JKV.js";import{b as B,c as x,e as $,f as J,g as K,i as v,k as Q,l as W,m as X,o as Y}from"./chunk-A23VZRFP.js";import{b as y}from"./chunk-TETLBYVM.js";import"./chunk-GGQ7LRWG.js";import{A as H,n as j,z}from"./chunk-645P5KEC.js";import"./chunk-TBYF2LDC.js";import{e as O}from"./chunk-6KR62BTE.js";import{f as q,h as V}from"./chunk-6M5HUDFR.js";import{i as G,k as P,l as R,p as _}from"./chunk-RSINUCQW.js";import{Ab as U,Ba as E,Eb as k,Fa as o,Fb as c,Gb as N,N as M,Qa as C,R as f,Ra as S,Va as d,W as T,X as b,Zb as D,fb as u,gb as g,jc as A,kb as i,lb as a,mb as r,nb as p,rb as F,sb as L,tb as s}from"./chunk-SWFXP6AJ.js";import"./chunk-EQDQRRRY.js";function me(e,n){e&1&&p(0,"CheckIcon",4),e&2&&i("styleClass","p-inline-message-icon")}function ce(e,n){e&1&&p(0,"InfoCircleIcon",4),e&2&&i("styleClass","p-inline-message-icon")}function de(e,n){e&1&&p(0,"TimesCircleIcon",4),e&2&&i("styleClass","p-inline-message-icon")}function ue(e,n){e&1&&p(0,"ExclamationTriangleIcon",4),e&2&&i("styleClass","p-inline-message-icon")}function ge(e,n){if(e&1&&p(0,"span",6),e&2){let t=s(2);i("innerHTML",t.text,E)}}function fe(e,n){if(e&1&&(a(0,"div"),d(1,ge,1,1,"span",5),r()),e&2){let t=s();o(),i("ngIf",!t.escape)}}function Ce(e,n){if(e&1&&(a(0,"span",8),c(1),r()),e&2){let t=s(2);o(),N(t.text)}}function _e(e,n){if(e&1&&d(0,Ce,2,1,"span",7),e&2){let t=s();i("ngIf",t.escape)}}var re=(()=>{class e{severity;text;escape=!0;style;styleClass;get icon(){return this.severity?this.severity:"info"}get containerClass(){return{[`p-inline-message-${this.severity}`]:this.severity,"p-inline-message-icon-only":this.text==null}}static \u0275fac=function(m){return new(m||e)};static \u0275cmp=C({type:e,selectors:[["p-message"]],hostAttrs:[1,"p-element"],inputs:{severity:"severity",text:"text",escape:[2,"escape","escape",A],style:"style",styleClass:"styleClass"},standalone:!1,decls:8,vars:10,consts:[["escapeOut",""],["aria-live","polite",1,"p-inline-message","p-component","p-inline-message",3,"ngStyle","ngClass"],[3,"styleClass",4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"styleClass"],["class","p-inline-message-text",3,"innerHTML",4,"ngIf"],[1,"p-inline-message-text",3,"innerHTML"],["class","p-inline-message-text",4,"ngIf"],[1,"p-inline-message-text"]],template:function(m,l){if(m&1&&(a(0,"div",1),d(1,me,1,1,"CheckIcon",2)(2,ce,1,1,"InfoCircleIcon",2)(3,de,1,1,"TimesCircleIcon",2)(4,ue,1,1,"ExclamationTriangleIcon",2)(5,fe,2,1,"div",3)(6,_e,1,1,"ng-template",null,0,D),r()),m&2){let le=U(7);k(l.styleClass),i("ngStyle",l.style)("ngClass",l.containerClass),o(),i("ngIf",l.icon==="success"),o(),i("ngIf",l.icon==="info"),o(),i("ngIf",l.icon==="error"),o(),i("ngIf",l.icon==="warn"),o(),i("ngIf",!l.escape)("ngIfElse",le)}},dependencies:()=>[G,P,R,y,w,I,h],styles:[`@layer primeng{.p-inline-message{display:inline-flex;align-items:center;justify-content:center;vertical-align:top}.p-inline-message-icon-only .p-inline-message-text{visibility:hidden;width:0}.p-fluid .p-inline-message{display:flex}}
`],encapsulation:2,changeDetection:0})}return e})(),ae=(()=>{class e{static \u0275fac=function(m){return new(m||e)};static \u0275mod=S({type:e});static \u0275inj=M({imports:[_,y,w,I,h]})}return e})();function ve(e,n){e&1&&(a(0,"div",5)(1,"p",6),c(2,"Please sign in to your account"),r()())}function ye(e,n){if(e&1&&(a(0,"div",8),p(1,"p-message",17),r()),e&2){let t=s(2);o(),i("text",t.errorMessage)}}function Ie(e,n){e&1&&(a(0,"span"),c(1,"Username is required"),r())}function he(e,n){if(e&1&&(a(0,"div",12),u(1,Ie,2,0,"span"),r()),e&2){let t=s(2);o(),g(!(t.usernameControl==null||t.usernameControl.errors==null)&&t.usernameControl.errors.required?1:-1)}}function we(e,n){e&1&&(a(0,"span"),c(1,"Password is required"),r())}function Me(e,n){if(e&1&&(a(0,"div",12),u(1,we,2,0,"span"),r()),e&2){let t=s(2);o(),g(!(t.passwordControl==null||t.passwordControl.errors==null)&&t.passwordControl.errors.required?1:-1)}}function Te(e,n){if(e&1){let t=F();a(0,"form",7),u(1,ye,2,1,"div",8),a(2,"div",9)(3,"label",10),c(4," Username "),r(),p(5,"input",11),u(6,he,2,1,"div",12),r(),a(7,"div",9)(8,"label",13),c(9,"Password"),r(),p(10,"p-password",14),u(11,Me,2,1,"div",12),r(),a(12,"div",15)(13,"p-button",16),L("click",function(){T(t);let l=s();return b(l.login())}),r()()()}if(e&2){let t=s();i("formGroup",t.inputForm),o(),g(t.errorMessage?1:-1),o(5),g(t.usernameControl!=null&&t.usernameControl.invalid&&(t.usernameControl!=null&&t.usernameControl.touched)?6:-1),o(4),i("toggleMask",!0)("feedback",!1),o(),g(t.passwordControl!=null&&t.passwordControl.invalid&&(t.passwordControl!=null&&t.passwordControl.touched)?11:-1),o(2),i("loading",t.isLoading)}}var se=class e{inputForm;isLoading=!1;errorMessage="";authService=f(O);router=f(V);activatedRoute=f(q);ngOnInit(){this.initializeForm()}login(){if(this.inputForm.invalid){this.markFormGroupTouched();return}this.isLoading=!0,this.errorMessage="";let n=this.inputForm.value;this.authService.login(n).subscribe({next:()=>{this.isLoading=!1,this.navigateAfterLogin()},error:t=>{console.error("Login failed:",{error:t}),this.isLoading=!1,this.errorMessage=t.error}})}markFormGroupTouched(){Object.keys(this.inputForm.controls).forEach(n=>{this.inputForm.get(n)?.markAsTouched()})}get usernameControl(){return this.inputForm.get("username")}get passwordControl(){return this.inputForm.get("password")}initializeForm(){this.inputForm=new K({username:new v("",[x.required]),password:new v("",[x.required])})}navigateAfterLogin(){let n=this.activatedRoute.snapshot.queryParams.returnUrl||"/";this.router.navigate([n])}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=C({type:e,selectors:[["app-login"]],decls:5,vars:0,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-blue-50","to-indigo-100","px-4"],[1,"w-full","max-w-md"],[1,"shadow-xl","border-radius-lg"],["pTemplate","header"],["pTemplate","content"],[1,"text-center","py-6"],[1,"text-gray-600"],[1,"space-y-6",3,"formGroup"],[1,"mb-4"],[1,"space-y-2"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],["pInputText","","id","username","formControlName","username","placeholder","Enter your username",1,"w-full"],[1,"text-red-500","text-sm"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["formControlName","password","placeholder","Enter your password","inputId","password","styleClass","w-full","inputStyleClass","w-full",3,"toggleMask","feedback"],[1,"pt-4","w-full"],["type","button","label","Sign In","severity","contrast","size","large",1,"w-full","bg-blue-600","text-white","hover:bg-blue-700","focus:ring-blue-500","focus:ring-offset-blue-200","transition","duration-150","ease-in-out","text-center","rounded-lg","shadow-sm","py-3","text-lg","cursor-pointer",3,"click","loading"],["severity","error",1,"w-full",3,"text"]],template:function(t,m){t&1&&(a(0,"div",0)(1,"div",1)(2,"p-card",2),d(3,ve,3,0,"ng-template",3)(4,Te,14,7,"ng-template",4),r()()())},dependencies:[Y,Q,B,$,J,W,X,_,H,z,j,ee,Z,oe,ie,ne,te,ae,re],encapsulation:2})};export{se as LoginComponent};
