import{a as $}from"./chunk-RWUSELY3.js";import{a as k,b as z,c as O,d as L}from"./chunk-3B7USW67.js";import"./chunk-IJ4WXL4G.js";import"./chunk-FQFQXYMG.js";import"./chunk-GUBCOLOF.js";import"./chunk-PGWBVQKT.js";import{c as F,d as M}from"./chunk-COKV7JKV.js";import"./chunk-A23VZRFP.js";import{a as A}from"./chunk-354WL4MM.js";import"./chunk-TETLBYVM.js";import"./chunk-GGQ7LRWG.js";import{A as V,n as R}from"./chunk-645P5KEC.js";import"./chunk-TBYF2LDC.js";import{b as I,d as D,e as N}from"./chunk-6KR62BTE.js";import{h as E}from"./chunk-6M5HUDFR.js";import"./chunk-RSINUCQW.js";import{Fa as s,Fb as r,Gb as d,Ha as j,Ma as P,Ob as T,Qa as y,R as p,Sa as w,Va as _,W as f,X as v,kb as c,lb as i,mb as n,nb as h,rb as C,sb as m,tb as b}from"./chunk-SWFXP6AJ.js";import{a as S,b as x}from"./chunk-EQDQRRRY.js";var u=class t{roles=[];authService=p(N);templateRef=p(j);viewContainer=p(P);ngOnInit(){this.authService.hasRole(this.roles)?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()}static \u0275fac=function(o){return new(o||t)};static \u0275dir=w({type:t,selectors:[["","appAccessControl",""]],inputs:{roles:[0,"appAccessControl","roles"]}})};var q=t=>[t];function H(t,e){if(t&1){let o=C();i(0,"button",11),m("click",function(){f(o);let l=b();return v(l.create())}),h(1,"i",12),i(2,"span"),r(3,"New"),n()()}}function J(t,e){t&1&&(i(0,"tr")(1,"th"),r(2,"#"),n(),i(3,"th"),r(4,"Id"),n(),i(5,"th"),r(6,"Name"),n(),i(7,"th",13),r(8,"Actions"),n()())}function K(t,e){if(t&1){let o=C();i(0,"tr")(1,"td"),r(2),n(),i(3,"td"),r(4),n(),i(5,"td"),r(6),n(),i(7,"td",13)(8,"div",14)(9,"button",15),m("click",function(){let l=f(o).$implicit,g=b();return v(g.view(l.id))}),h(10,"i",16),n()()()()}if(t&2){let o=e.$implicit,a=e.rowIndex;s(2),d(a+1),s(2),d(o.id),s(2),d(o.name)}}function Q(t,e){t&1&&(i(0,"tr")(1,"td",17),r(2,"No users found."),n()())}var B=class t{data=[];pagination=D;SystemRoles=I;router=p(E);toaster=p(A);projectsService=p($);ngOnInit(){this.getData()}create(){this.router.navigate(["create-project"],{relativeTo:this.router.routerState.root})}edit(e){this.router.navigate(["edit-project",e],{relativeTo:this.router.routerState.root})}view(e){console.log("View project with ID:",e)}getData(){this.projectsService.getAll(this.pagination).subscribe({next:e=>{console.log(e),this.data=e.items,this.pagination=x(S({},this.pagination),{totalRecords:e.count})},error:e=>{this.toaster.showError("Failed to load projects")}})}onPageChange(e){this.pagination.pageNumber=e.pageNumber,this.pagination.pageSize=e.pageSize,this.getData()}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=y({type:t,selectors:[["app-projects"]],decls:12,vars:7,consts:[[1,"page"],[1,"page-header"],[1,"page-header-title"],["class","btn btn-primary",3,"click",4,"appAccessControl"],[1,"page-content"],[1,"px-0"],["styleClass","p-datatable-striped",3,"value","responsiveLayout","scrollable"],["pTemplate","header"],["pTemplate","body"],["pTemplate","empty"],[3,"onPageChange","paginationConfig"],[1,"btn","btn-primary",3,"click"],[1,"pi","pi-plus"],["pFrozenColumn",""],[1,"flex","gap-10"],[1,"btn","btn-outline","border-0",3,"click"],[1,"pi","pi-pencil","ca-text-info","ca-font-bold"],["colspan","3",1,"text-center"]],template:function(o,a){o&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Projects"),n(),_(4,H,4,0,"button",3),n(),i(5,"div",4)(6,"p-card",5)(7,"p-table",6),_(8,J,9,0,"ng-template",7)(9,K,11,3,"ng-template",8)(10,Q,3,0,"ng-template",9),n(),i(11,"app-pagination",10),m("onPageChange",function(g){return a.onPageChange(g)}),n()()()()),o&2&&(s(4),c("appAccessControl",T(5,q,a.SystemRoles.ADMIN)),s(3),c("value",a.data)("responsiveLayout","scroll")("scrollable",!0),s(4),c("paginationConfig",a.pagination))},dependencies:[V,R,M,F,L,z,O,k,u],encapsulation:2})};export{B as ProjectsComponent};
