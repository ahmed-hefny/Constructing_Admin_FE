import{a as z}from"./chunk-6YMPGOFZ.js";import{a as P,b as R,c as k,d as w}from"./chunk-FXENJLEK.js";import{a as A}from"./chunk-VN2DWCR7.js";import"./chunk-CFO42UOC.js";import"./chunk-XE2DAF5U.js";import"./chunk-GUBCOLOF.js";import"./chunk-TKOGCPQ2.js";import{c as I,d as N}from"./chunk-SC4WDLJ2.js";import"./chunk-A23VZRFP.js";import{a as y}from"./chunk-4TIZV3QQ.js";import"./chunk-QM66G4CE.js";import"./chunk-GGQ7LRWG.js";import{e as E}from"./chunk-ERDV7APT.js";import{n as T}from"./chunk-W3TJ7HAV.js";import"./chunk-TBYF2LDC.js";import{d as D}from"./chunk-6KR62BTE.js";import{h as U}from"./chunk-6M5HUDFR.js";import"./chunk-RSINUCQW.js";import{Fa as s,Fb as r,Gb as d,Qa as h,R as m,Va as S,W as g,X as f,kb as _,lb as t,mb as i,nb as u,rb as x,sb as c,tb as b}from"./chunk-SWFXP6AJ.js";import{a as v,b as C}from"./chunk-EQDQRRRY.js";function O(o,e){o&1&&(t(0,"tr")(1,"th",12),r(2,"Username"),i(),t(3,"th"),r(4,"Role"),i(),t(5,"th"),r(6,"Company"),i(),t(7,"th"),r(8,"Actions"),i()())}function V(o,e){if(o&1){let n=x();t(0,"tr")(1,"td",12),r(2),i(),t(3,"td"),r(4),i(),t(5,"td"),r(6),i(),t(7,"td")(8,"div",13)(9,"button",14),c("click",function(){let l=g(n).$implicit,p=b();return f(p.editUser(l.id))}),u(10,"i",15),i(),t(11,"button",14),c("click",function(){let l=g(n).$implicit,p=b();return f(p.confirmDelete(l.id))}),u(12,"i",16),i()()()()}if(o&2){let n=e.$implicit;s(2),d(n.username),s(2),d(n.role),s(2),d(n.companyName||"-")}}function j(o,e){o&1&&(t(0,"tr")(1,"td",17),r(2,"No users found."),i()())}var M=class o{data=[];pagination=D;router=m(U);usersService=m(A);toaster=m(y);dialogService=m(z);ngOnInit(){this.getData()}createUser(){this.router.navigate(["users","create"],{relativeTo:this.router.routerState.root})}editUser(e){this.router.navigate(["users","edit",e],{relativeTo:this.router.routerState.root})}deleteUser(e){this.usersService.delete(e).subscribe({next:()=>{this.getData(),this.toaster.showSuccess("User deleted successfully")}})}confirmDelete(e){let n={header:"Confirmation",closeOnEscape:!0,icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"btn btn-error",rejectButtonStyleClass:"btn btn-accent mr-2",acceptLabel:"Delete",acceptIcon:"pi pi-check",rejectLabel:"Cancel",rejectIcon:"pi pi-times",message:"Are you sure you want to delete this user?",onAccept:()=>{this.deleteUser(e)}};this.dialogService.confirmDialog(n)}getData(){this.usersService.getAllUsers(this.pagination).subscribe({next:e=>{this.data=e.items,this.pagination=C(v({},this.pagination),{totalRecords:e.count})},error:e=>{console.error("Error fetching users:",e)}})}onPageChange(e){this.pagination.pageNumber=e.pageNumber,this.pagination.pageSize=e.pageSize,this.getData()}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=h({type:o,selectors:[["app-users"]],decls:15,vars:4,consts:[[1,"page"],[1,"page-header"],[1,"page-header-title"],[1,"btn","btn-primary",3,"click"],[1,"pi","pi-plus"],[1,"page-content"],[1,"px-0"],["styleClass","p-datatable-striped",3,"value","responsiveLayout","scrollable"],["pTemplate","header"],["pTemplate","body"],["pTemplate","empty"],[3,"onPageChange","paginationConfig"],["pFrozenColumn",""],[1,"flex","gap-10"],[1,"btn","btn-outline","border-0",3,"click"],[1,"pi","pi-pencil","ca-text-info","ca-font-bold"],[1,"pi","pi-trash","ca-text-error","ca-font-bold"],["colspan","3",1,"text-center"]],template:function(n,a){n&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Users"),i(),t(4,"button",3),c("click",function(){return a.createUser()}),u(5,"i",4),t(6,"span"),r(7,"New"),i()()(),t(8,"div",5)(9,"p-card",6)(10,"p-table",7),S(11,O,9,0,"ng-template",8)(12,V,13,3,"ng-template",9)(13,j,3,0,"ng-template",10),i(),t(14,"app-pagination",11),c("onPageChange",function(p){return a.onPageChange(p)}),i()()()()),n&2&&(s(10),_("value",a.data)("responsiveLayout","scroll")("scrollable",!0),s(4),_("paginationConfig",a.pagination))},dependencies:[E,T,N,I,w,R,k,P],encapsulation:2})};export{M as UsersComponent};
